#! /usr/bin/env ruby

require_relative '../lib/game'
require_relative '../lib/game_looper'
require_relative '../lib/console'
require_relative '../lib/display'
require_relative '../lib/prompt'
require_relative '../lib/board'
require_relative '../lib/number_validator'
require_relative '../lib/availability_validator'
require_relative '../lib/player'

welcome_message = 'Welcome to Tic Tac Toe!'
console = Console.new($stdout, $stdin)
display = Display.new
board = Board.new
number_validator = NumberValidator.new
availability_validator = AvailabilityValidator.new(board: board)
prompt = Prompt.new(console: console, number_validator: number_validator, availability_validator: availability_validator)
player_one = Player.new(marker: 'X')
player_two = Player.new(marker: 'O')
players = [player_one, player_two]
game_looper = GameLooper.new(console: console, display: display, prompt: prompt, board: board, players: players)
game = Game.new(console: console, game_looper: game_looper, welcome_message: welcome_message)
game.run
